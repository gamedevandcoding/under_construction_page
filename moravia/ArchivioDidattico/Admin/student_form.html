<!DOCTYPE html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='admin.css' rel='stylesheet' media="screen">
        <title>Archivio Didattico - Admin</title>
    </head>

    <body>

        <div class="main_container">

            <div class="sidebar_container" id="sidebar_display">
                <div class="sidebar__scrollable_content">

                    <div class="sidebar__main_content">
                        <div class="logo_container" id="header__logo">
                            <div class="logo_textbox" id="logo_textbox_white">
                                <span id="logo_title">CENTRO STUDI</span>
                                <span id="logo_subtitle">DI GIOVANNI LOTITO</span>
                            </div>
                            <svg class="logo_svg" viewBox="0 0 69.205 71.16"><path d="M8.053 34.976a37.214 37.214 0 0 0 6.807 4.332 40.077 40.077 0 0 0 22.59 3.55L67.928 5.552a78.552 78.552 0 0 1-20.872-1.18A78.355 78.355 0 0 1 32.329 0h-8.283L.69 34.746a76.456 76.456 0 0 1 .475 11.175A76.462 76.462 0 0 1 0 57.067h1.495a70.005 70.005 0 0 0 1.352-11.362 70.007 70.007 0 0 0-.431-10.729zM25.11 1.438h3.624L7.852 33.711h-4.4z"/><path d="M38.226 45.101a50.257 50.257 0 0 1-8.198.173 40.305 40.305 0 0 1-15.893-3.767 35.814 35.814 0 0 1-6.772-4.287l-.575 1.093a36.751 36.751 0 0 0 6.857 4.35c6.165 3.01 11.756 3.578 16.21 3.991a62.616 62.616 0 0 0 9.148.173L68.513 10.7l-1.15-1.438z"/><path d="M67.708 13.922 39.52 48.552a74.873 74.873 0 0 1-16.186-1.386c-6.706-1.33-9.66-2.904-10.951-3.654a27.91 27.91 0 0 1-6.803-5.573H4.142l-.69 19.128h1.466l.863-15.331c.177.138.376.289.583.445l-.382 14.886h1.726V43.143a37.44 37.44 0 0 0 2.43 1.527c.073.041.144.078.216.12v17.224h5.739v9.147h11.26a81.407 81.407 0 0 1 8.911-2.31 82.387 82.387 0 0 1 21.953-1.372l.278-39.367L69.205 14.9zM12.253 60.288l-.322-14.656q.891.449 1.76.826v5.891h5.695v-1.553h-3.797v-3.574a52.614 52.614 0 0 0 9.176 2.323 65.078 65.078 0 0 0 15.605.928l11.543-14.24.666.47v3.796l-3.452 4.257v5.81a18.804 18.804 0 0 1-4.602 5.235c-5.232 4.05-11.6 4.323-14.755 4.458a32.86 32.86 0 0 1-1.755.03H12.253zm43.26 4.775a85.541 85.541 0 0 0-19.62 1.418 84.95 84.95 0 0 0-9.402 2.35h-7.853v-6.82c3.379-.008 6.482-.028 9.262-.055 4.98-.047 6.35-.089 8.399-.517a21.805 21.805 0 0 0 9.147-3.855 20.268 20.268 0 0 0 5.465-6.27v-6.155l3.509-4.43v-3.97l-.92-1.265v-1.219l2.895-3.573-.882 34.36z"/><path d="M15.762 54.823h7.708v1.151h-7.708z"/></svg>
                        </div>
                        <span class="sidebar__username">Amministratore</span>
                        <div class="sidebar__dropdown_container">
                            <label class="sidebar__dropdown_toggle" for="toggle_students" id="toggle_students_container">
                                <input type="checkbox" id="toggle_students">
                                <span>Studenti</span>
                                <svg id="students_arrow" viewBox="0 0 297.3 168.6"><path d="M148.7 168.6 297.3 0H0l148.7 168.6z"/></svg>
                            </label>
                            <ul class="dropdown_content" id="dropdown_students">
                                <li><a href="student_list.html">Lista</a></li>
                                <li><a href="student_form.html">Nuovo</a></li>
                            </ul>
                        </div>
                        <div class="sidebar__dropdown_container">
                            <label class="sidebar__dropdown_toggle" for="toggle_subjects" id="toggle_subjects_container">
                                <input type="checkbox" id="toggle_subjects">
                                <span>Materie</span>
                                <svg id="subjects_arrow" viewBox="0 0 297.3 168.6"><path d="M148.7 168.6 297.3 0H0l148.7 168.6z"/></svg>
                            </label>
                            <ul class="dropdown_content" id="dropdown_subjects">
                                <li><a>Diritto</a></li>
                                <li><a>Econimia</a></li>
                                <li><a>Economia Politica</a></li>
                                <li><a>Filosofia</a></li>
                                <li><a href="subject_files_list.html">Informatica</a></li>
                                <li><a>Inglese</a></li>
                                <li><a>Italiano</a></li>
                                <li><a>Latino</a></li>
                                <li><a>Matematica</a></li>
                                <li><a>Spagnolo</a></li>
                                <li><a>Storia</a></li>
                                <li><a>Storia Dell’Arte</a></li>
                            </ul>
                        </div>
                    </div>
                    <button class="sidebar__close" onclick="close_sidebar()">CHIUDI</button>

                </div>
            </div>


            <div class="panel_container" id="panel_display">

                <!---------------------- NAVBAR ---------------------->
                <div class="top_navbar" id="navbar_container">
                    <div class="navbar_content">
                        <span class="navbar__span">NUOVO STUDENTE</span>
                        <label class="navbar_hamburger" id="navbar_toggle__container" for="navbar_toggle">
                            <input type="checkbox" id="navbar_toggle">
                            <svg class="navbar__svg" id="navbar__open" viewBox="0 0 55.5 55.5"><path d="M0 47.5h55.5v8H0zM0 0h55.5v8H0zM0 23.75h55.5v8H0z"/></svg>
                            <svg class="navbar__svg" id="navbar__close" viewBox="0 0 55.5 55.5"><path d="M55.251 5.657 49.594 0 27.625 21.968 5.657 0 0 5.657l21.968 21.968L0 49.594l5.657 5.657 21.968-21.969 21.969 21.969 5.657-5.657-21.969-21.969L55.251 5.657z"/></svg>
                        </label>
                    </div>
                </div>
                <!---------------------- NAVBAR ---------------------->

                <div class="scrollable_content">
                    <div class="content_container">

                        <section class="section_container section_flex">

                            <div class="form_container">
                                <div class="student_message" id="student_output">
                                    <svg class="student_message__icon" id="student_icon__done" viewBox="0 0 75 75"><path d="M0 0v75h75V0zm35.534 51.236-4.154 4.155-4.155-4.155-15.232-15.231 4.155-4.155L31.38 47.082 58.852 19.61l4.154 4.154z"/></svg>
                                    <svg class="student_message__icon" id="student_icon__warn"viewBox="0 0 86.603 75"><path d="m-3630.64 1211.653-43.301 75h86.602zm3.41 62.45H-3634v-7.023h6.769zm-1.68-11.297h-3.41l-1.933-22.544v-1.78h7.226v1.78z" transform="translate(3673.941 -1211.653)"/></svg>
                                    <svg class="student_message__icon" id="student_icon__info" viewBox="0 0 86.603 75"><path d="M0 0v75h75V0zm40.884 57.246h-6.769V29.052h6.769zm0-32.468h-6.769v-7.024h6.769z"/></svg>
                                    <span class="student_message__span" id="student_span__description">OUTPUT</span>
                                </div>
                                <input type="text" class="student_element" id="student_name" placeholder="Nome">
                                <input type="text" class="student_element" id="student_surname" placeholder="Cognome">
                                <input type="text" class="student_element" id="student_age" placeholder="Età">
                                <select name="school" class="student_element" id="student_school">
                                    <option value="" disabled selected hidden>Scuola</option>
                                    <option value="SM">Scuola Media</option>
                                    <option value="LC">Liceo Classico</option>
                                    <option value="LS">Liceo Scientifico</option>
                                    <option value="LSU">Liceo Scienze Umane</option>
                                    <option value="ITI">Istituto Tecnico Informatico</option>
                                    <option value="ITC">Istituto Tecnico Commerciale</option>
                                    <option value="ITG">Istituto Tecnico per Geometri</option>
                                    <option value="IPA">Istituto Alberghiero</option>
                                </select>
                                <select name="authorization" class="student_element" id="student_authorization">
                                    <option value="" disabled selected hidden>Autorizzazione</option>
                                    <option value="bn">Biennio</option>
                                    <option value="tr">Triennio</option>
                                    <option value="tt">Tutto</option>
                                </select>
                                <button class="student_element" onclick="create_unicode()" id="student_submit">CONFERMA ISCRIZIONE</button>
                                <button class="student_element" onclick="clear_fields()" id="student_clean">NUOVA ISCRIZIONE</button>
                                <label class="student_element" id="student_unicode_label">Codive Univoco</label>
                                <span class="student_element" id="student_unicode">XXXXXXXXX</span>
                                
                                <button class="student_element button_copy" onclick="copy_clipboard()">
                                    <svg class="button_copy__svg" viewBox="0 0 60.938 75"><path d="M14.063 0H9.375v9.375H0V75h51.563v-9.375h9.374V0zm32.812 70.313H4.687v-56.25h42.188zm9.375-9.376h-4.688V9.376h-37.5V4.687H56.25z"/></svg>
                                    <span class="button_copy__span">Copia</span>
                                </button>
                            </div>

                            <div class="form_description">
                                Il Codice Univoco dello studente è necessario per poter accedere all' Archivio Didattico del Centro Studi Moravia, ed usufruire dei contenuti come documenti pdf, slides, e videolezioni asincrone.
                                <br class="breakline-text">Per visualizzare la lista di tutti gli studenti con accesso all'archvio didattico, apri la barra laterale, apri il menu "studenti", e premi su "Lista".
                                <br class="breakline-text">Nella lista studenti, potrai revocare i diritti di accesso all'archivio didattico a uno studente, eliminadolo dal database con il bottone apposito, alternativamente potrai visualizzare tutti i dati dello studente interessato.
                                <br class="breakline-text">Se vuoi accedere rapidamente alla lista studenti, <a href="student_list.html" class="hyperlink_description">premi qui.</a>
                            </div>
                            
                        </section>

                        <span class="footer_span">CENTRO STUDI DI LOTITO GIOVANNI <span class="copyright__span">© TUTTI DIRITTI RISERVATI</span></span>
                        <span class="footer_span">CENTRO STUDI DI LOTITO GIOVANNI <span class="copyright__span">© TUTTI DIRITTI RISERVATI</span></span>

                        <span class="footer_span">CENTRO STUDI DI LOTITO GIOVANNI <span class="copyright__span">© TUTTI DIRITTI RISERVATI</span></span>
                        <span class="footer_span">CENTRO STUDI DI LOTITO GIOVANNI <span class="copyright__span">© TUTTI DIRITTI RISERVATI</span></span>
                        <span class="footer_span">CENTRO STUDI DI LOTITO GIOVANNI <span class="copyright__span">© TUTTI DIRITTI RISERVATI</span></span>
                    </div>
                </div>

            </div>
        </div>

        <script>

            const sidebar = document.getElementById("sidebar_display");
            const panel = document.getElementById("panel_display");
            const navbar = document.getElementById("navbar_container");
            const open_icon = document.getElementById("navbar__open");
            const close_icon = document.getElementById("navbar__close");
            const navbar_toggle = document.getElementById("navbar_toggle__container");

            var mobileMediaQuery = window.matchMedia("(max-width: 765px)");
            var navbar_checkbox = document.getElementById("navbar_toggle");
            navbar_checkbox.checked = false;

            navbar_toggle.addEventListener("click", () =>{ 

                if(navbar_checkbox.checked == true){

                    sidebar.style.display = "block";
                    panel.style.width = "calc(100% - 301px)";
                    open_icon.style.display = "none";
                    close_icon.style.display = "inline-block";

                    if(mobileMediaQuery.matches != false){ panel.style.display = "none"; navbar.style.display = "none"; }
                }
                else{

                    sidebar.style.display = "none";
                    panel.style.width = "100%";
                    open_icon.style.display = "inline-block";
                    close_icon.style.display = "none";

                    if(mobileMediaQuery.matches != false){ panel.style.display = "block"; navbar.style.display = "flex"; }
                }
            });
            function close_sidebar(){
                
                navbar_checkbox.checked = false;
                sidebar.style.display = "none";
                panel.style.width = "100%";
                open_icon.style.display = "inline-block";
                close_icon.style.display = "none";

                if(mobileMediaQuery.matches != false){ panel.style.display = "block"; navbar.style.display = "flex"; }
            }
            window.addEventListener("resize",() =>{

                if(mobileMediaQuery.matches != false){

                    if(navbar_checkbox.checked == true){
                        panel.style.display = "none";
                        navbar.style.display = "none";
                    }
                }
                else{

                    if(navbar_checkbox.checked == true){
                        panel.style.display = "block";
                        navbar.style.display = "flex";
                    }
                }
            });

            const toggle_students = document.getElementById("toggle_students_container");
            const toggle_subjects = document.getElementById("toggle_subjects_container");
            const students_arrow = document.getElementById("students_arrow");
            const subjects_arrow = document.getElementById("subjects_arrow");
            const students_dropdown = document.getElementById("dropdown_students");
            const subjects_dropdown = document.getElementById("dropdown_subjects");

            var students_checkbox = document.getElementById("toggle_students");
            var subjects_checkbox = document.getElementById("toggle_subjects");
            students_checkbox.checked = false;
            subjects_checkbox.checked = false;

            toggle_students.addEventListener("click", () =>{ 
                if(students_checkbox.checked == true){ students_dropdown.style.display = "block"; }
                else{ students_dropdown.style.display = "none"; }
            });
            toggle_subjects.addEventListener("click", () =>{ 
                if(subjects_checkbox.checked == true){ subjects_dropdown.style.display = "block"; }
                else{ subjects_dropdown.style.display = "none"; }
            });

        </script>

        <script>

            const student_output = document.getElementById('student_output');
            const student_done = document.getElementById('student_icon__done');
            const student_warn = document.getElementById('student_icon__warn');
            const student_info = document.getElementById('student_icon__info');
            const student_span = document.getElementById('student_span__description');

            const studentName = document.getElementById('student_name');
            const studentSurname = document.getElementById('student_surname');
            const studentAge = document.getElementById('student_age');
            const studentSchool = document.getElementById("student_school");
            const studentAuthoriz = document.getElementById("student_authorization");

            const studentUnicode = document.getElementById("student_unicode");

            function student_added(){ student_output.style.backgroundColor = "#00c90f"; student_info.style.display = "none"; student_warn.style.display = "none"; student_done.style.display = "block"; student_span.innerText = "STUDENTE AGGIUNTO"; /*student_output.style.visibility = "visible";*/ }
            function student_error(){ student_output.style.backgroundColor = "#ff0000"; student_info.style.display = "none"; student_done.style.display = "none"; student_warn.style.display = "block"; }
            function create_unicode(){
                try{
                    var unicode = "";
                    
                    let currentDate = new Date();
                    let isAllString = /\d/;  
                    let isAllNumber = /^\d+$/;

                    studentName.value = studentName.value.replace(/\s/g, '');
                    studentSurname.value = studentSurname.value.replace(/\s/g, '');
                    studentAge.value = studentAge.value.replace(/\s/g, '');
                    
                    if(studentName.value.length > 0 && studentSurname.value.length > 0 && studentAge.value.length > 0 && studentSchool.value.length > 0 && studentAuthoriz.value.length > 0){
                        if(isAllString.test(studentName.value) != true && isAllString.test(studentSurname.value) != true && isAllNumber.test(studentAge.value) != false){
                            unicode = 
                                currentDate.getDate().toString() + (currentDate.getMonth()+1).toString() + 
                                studentName.value.charAt(0).toUpperCase().toString() + studentName.value.charAt(parseInt((studentName.value.length - 1) / 2)).toUpperCase().toString() + studentName.value.charAt(studentName.value.length -1 ).toUpperCase().toString() +
                                studentSurname.value.charAt(0).toUpperCase().toString() + studentSurname.value.charAt(parseInt((studentSurname.value.length - 1) / 2)).toUpperCase().toString() + studentSurname.value.charAt(studentSurname.value.length -1 ).toUpperCase().toString() +
                                studentAge.value.toString() +
                                studentSchool.value.toString() + studentAuthoriz.value.toString() + 
                                currentDate.getHours().toString() + currentDate.getMinutes().toString() + currentDate.getSeconds().toString() + currentDate.getMilliseconds().toString().substring(0,3);
                                
                                studentUnicode.innerText = unicode;
                                studentUnicode.classList.add("selection_active");

                            student_added();
                        }
                    else{ student_error(); student_span.innerText = "CARATTERI ERRATI"; /*student_output.style.visibility = "visible";*/ }
                    }
                    else{ student_error(); student_span.innerText = "CAMPI VUOTI"; /*student_output.style.visibility = "visible";*/ }
                }
            catch(error){ student_error(); student_span.innerText = "ERRORE"; /*student_output.style.visibility = "visible";*/ }
            }
            function clear_fields(){

                student_done.style.display = "none";
                student_warn.style.display = "none";
                student_info.style.display = "block";
                student_span.innerText = "OUTPUT";
                student_output.style.backgroundColor = "#7f7f7f";
                //student_output.style.visibility = "hidden";
                studentName.value = "";
                studentSurname.value = "";
                studentAge.value = "";
                studentSchool.selectedIndex = "0";
                studentAuthoriz.selectedIndex = "0";
                studentUnicode.innerText = "XXXXXXXXX";
                navigator.clipboard.writeText("null");
            }   
            function copy_clipboard(){ navigator.clipboard.writeText(studentUnicode.textContent); }

            studentSchool.addEventListener("change", function() {
                if(studentSchool.value != ""){ studentSchool.style.color = "#000000"; }
                else{ studentSchool.style.color = "#757575"; }
            });
            studentAuthoriz.addEventListener("change", function() {
                if(studentAuthoriz.value != ""){ studentAuthoriz.style.color = "#000000"; }
                else{ studentAuthoriz.style.color = "#757575"; }
            });

        </script>

    </body>
</html>