<!DOCTYPE html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href='admin_panel_style.css' rel='stylesheet' media="screen">
        <title>Archivio Didattico - Admin</title>
    </head>

    <body>

        
        
        <div class="main_container">

            <header class="navbar clearfix">
                <label class="hamburger" id="header__hamburger" for="hamburger_toggle">
                    <input type="checkbox" id="hamburger_toggle">
                    <svg class="hamburger_svg" id="hamburger_menu_icon" viewBox="0 0 55.5 55.5"><path d="M0 47.5h55.5v8H0zM0 0h55.5v8H0zM0 23.75h55.5v8H0z"/></svg>
                    <svg class="hamburger_svg" id="hamburger_close_icon" viewBox="0 0 55.5 55.5"><path d="M55.251 5.657 49.594 0 27.625 21.968 5.657 0 0 5.657l21.968 21.968L0 49.594l5.657 5.657 21.968-21.969 21.969 21.969 5.657-5.657-21.969-21.969L55.251 5.657z"/></svg>
                </label>
            </header>

            <!------------------------------------ SIDEBAR ------------------------------------>
            <div class="sidebar" id="open_sidebar">
                <div class="sidebar_content" id="sidebar_content">

                    <div id="sidebar_scroll">
                        <a class="logo_container" id="header__logo">
                            <div class="logo_textbox" id="logo_textbox_white">
                                <span id="logo_title">CENTRO STUDI</span>
                                <span id="logo_subtitle">DI GIOVANNI LOTITO</span>
                            </div>
                            <svg class="logo_svg" viewBox="0 0 69.205 71.16"><path d="M8.053 34.976a37.214 37.214 0 0 0 6.807 4.332 40.077 40.077 0 0 0 22.59 3.55L67.928 5.552a78.552 78.552 0 0 1-20.872-1.18A78.355 78.355 0 0 1 32.329 0h-8.283L.69 34.746a76.456 76.456 0 0 1 .475 11.175A76.462 76.462 0 0 1 0 57.067h1.495a70.005 70.005 0 0 0 1.352-11.362 70.007 70.007 0 0 0-.431-10.729zM25.11 1.438h3.624L7.852 33.711h-4.4z"/><path d="M38.226 45.101a50.257 50.257 0 0 1-8.198.173 40.305 40.305 0 0 1-15.893-3.767 35.814 35.814 0 0 1-6.772-4.287l-.575 1.093a36.751 36.751 0 0 0 6.857 4.35c6.165 3.01 11.756 3.578 16.21 3.991a62.616 62.616 0 0 0 9.148.173L68.513 10.7l-1.15-1.438z"/><path d="M67.708 13.922 39.52 48.552a74.873 74.873 0 0 1-16.186-1.386c-6.706-1.33-9.66-2.904-10.951-3.654a27.91 27.91 0 0 1-6.803-5.573H4.142l-.69 19.128h1.466l.863-15.331c.177.138.376.289.583.445l-.382 14.886h1.726V43.143a37.44 37.44 0 0 0 2.43 1.527c.073.041.144.078.216.12v17.224h5.739v9.147h11.26a81.407 81.407 0 0 1 8.911-2.31 82.387 82.387 0 0 1 21.953-1.372l.278-39.367L69.205 14.9zM12.253 60.288l-.322-14.656q.891.449 1.76.826v5.891h5.695v-1.553h-3.797v-3.574a52.614 52.614 0 0 0 9.176 2.323 65.078 65.078 0 0 0 15.605.928l11.543-14.24.666.47v3.796l-3.452 4.257v5.81a18.804 18.804 0 0 1-4.602 5.235c-5.232 4.05-11.6 4.323-14.755 4.458a32.86 32.86 0 0 1-1.755.03H12.253zm43.26 4.775a85.541 85.541 0 0 0-19.62 1.418 84.95 84.95 0 0 0-9.402 2.35h-7.853v-6.82c3.379-.008 6.482-.028 9.262-.055 4.98-.047 6.35-.089 8.399-.517a21.805 21.805 0 0 0 9.147-3.855 20.268 20.268 0 0 0 5.465-6.27v-6.155l3.509-4.43v-3.97l-.92-1.265v-1.219l2.895-3.573-.882 34.36z"/><path d="M15.762 54.823h7.708v1.151h-7.708z"/></svg>
                        </a>

                        <div class="sidebar_element" id="userbox">Amministratore</div>

                        <div class="sidebar_element">
                            <label class="dropdown_btn" id="btn_students" for="toggle_students">
                                <input type="checkbox" class="dropdown_checkbox" id="toggle_students">
                                <span class="dropdown_title">Studenti</span>
                                <svg class="dropdown_icon" id="students_arrow" viewBox="0 0 297.3 168.6"><path d="M148.7 168.6 297.3 0H0l148.7 168.6z"/></svg>
                            </label>
                            <ul class="dropdown_list" id="dropdown_students">
                                <li><a>Lista</a></li>
                                <li><a>Nuovo</a></li>
                            </ul>
                        </div>

                        <div class="sidebar_element">
                            <label class="dropdown_btn" id="btn_subjects" for="toggle_subjects">
                                <input type="checkbox" class="dropdown_checkbox" id="toggle_subjects">
                                <span class="dropdown_title">Materie</span>
                                <svg class="dropdown_icon" id="subjects_arrow" viewBox="0 0 297.3 168.6"><path d="M148.7 168.6 297.3 0H0l148.7 168.6z"/></svg>
                            </label>
                            <ul class="dropdown_list" id="dropdown_subjects">
                                <li><a>Diritto</a></li>
                                <li><a>Econimia</a></li>
                                <li><a>Economia Politica</a></li>
                                <li><a>Filosofia</a></li>
                                <li><a>Informatica</a></li>
                                <li><a>Inglese</a></li>
                                <li><a>Italiano</a></li>
                                <li><a>Latino</a></li>
                                <li><a>Matematica</a></li>
                                <li><a>Spagnolo</a></li>
                                <li><a>Storia</a></li>
                                <li><a>Storia Dell’Arte</a></li>
                            </ul>
                        </div>
                    </div>
                    <button id="sidebar_close" onclick="close_sidebar()">CHIUDI</button>
                </div>
            </div>
            <!------------------------------------ SIDEBAR ------------------------------------>

            <div class="section_container" id="section_container_display">

                <section class="section" id="new_student">
                    <h1 class="section_title">Nuovo Studente</h1>
                    
                    <input type="text" class="new_student_element" id="student_name" placeholder="Nome">
                    <input type="text" class="new_student_element" id="student_surname" placeholder="Cognome">
                    <input type="text" class="new_student_element" id="student_age" placeholder="Età">
                    
                    <select name="school" class="new_student_element" id="student_school">
                        <option value="" disabled selected hidden>Scuola</option>
                        <option value="SM">Scuola Media</option>
                        <option value="LC">Liceo Classico</option>
                        <option value="LS">Liceo Scientifico</option>
                        <option value="LSU">Liceo Scienze Umane</option>
                        <option value="ITI">Istituto Tecnico Informatico</option>
                        <option value="ITC">Istituto Tecnico Commerciale</option>
                        <option value="ITG">Istituto Tecnico per Geometri</option>
                        <option value="IPA">Istituto Alberghiero</option>
                    </select>

                    <select name="authorization" class="new_student_element" id="student_authorization">
                        <option value="" disabled selected hidden>Autorizzazione</option>
                        <option value="bn">Biennio</option>
                        <option value="tr">Triennio</option>
                        <option value="tt">Tutto</option>
                    </select>

                    <button class="new_student_element" onclick="create_unicode()" id="student_submit">CONFERMA ISCRIZIONE</button>

                    <label class="new_student_element" id="student_unicode_label">Codive Univoco</label>
                    <div class="box_container">
                        <span class="new_student_element" id="student_unicode">XXXXXXXXX</span>
                        <button class="side_button" id="button_copy" onclick="copyToClipboard()"><svg id="icon_copy" viewBox="0 0 13 16"><path d="M11 0H4a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H3a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM1 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1z"/></svg></button>
                    </div>
                </section>

            </div>

        </div>

        <script>
        
            const button_students = document.getElementById("btn_students");
            const button_subjects = document.getElementById("btn_subjects");

            var school_select = document.getElementById("student_school");
            var authoriz_select  = document.getElementById("student_authorization");

            const arrow_students = document.getElementById("students_arrow");
            const arrow_subjects = document.getElementById("subjects_arrow");

            const dropdown_students = document.getElementById("dropdown_students");
            const dropdown_subjects = document.getElementById("dropdown_subjects");

            const sidebar_open = document.getElementById("open_sidebar");
            const section_container = document.getElementById("section_container_display");
            const sidebar_content = document.getElementById("sidebar_content");
            const sidebar_content_scroll = document.getElementById("sidebar_scroll");
            
            var hamburger_checkbox = document.getElementById("hamburger_toggle");
            const menu_icon = document.getElementById("hamburger_menu_icon");
            const close_icon = document.getElementById("hamburger_close_icon");

            var tabletMediaQuery = window.matchMedia("(max-width: 825px)");

            var checkbox_students = document.getElementById("toggle_students");
            var checkbox_subjects = document.getElementById("toggle_subjects");
            
            checkbox_students.checked = false;
            checkbox_subjects.checked = false;
            hamburger_checkbox.checked = false;

            var click_toggle = 0;
            
            function close_sidebar(){

                sidebar_open.style.display = "none";
                hamburger_checkbox.checked = false;

                sidebar_open.style.display = "none";
                menu_icon.style.display = "inline-block";
                close_icon.style.display = "none";
                
                if(tabletMediaQuery.matches != true){
                    section_container.style.marginLeft = "25px";
                    section_container.style.width = "500px";
                }
                //click_toggle = 0;
            }

            function center_section(){ 

                section_container.style.marginLeft = "0px";
                section_container.style.marginRight = "0px";
                section_container.style.width = "100%";
             }

            hamburger_checkbox.addEventListener("click", () =>{ 
                try{
                    if(click_toggle != 1){ click_toggle = 1; }
                    if (hamburger_checkbox.checked == true) {
                        
                        sidebar_open.style.display = "block";
                        menu_icon.style.display = "none";
                        close_icon.style.display = "inline-block";

                        //section_container.style.marginLeft = ( (25 + 310) + "px").toString();
                    }
                    else{

                        sidebar_open.style.display = "none";
                        menu_icon.style.display = "inline-block";
                        close_icon.style.display = "none";

                        if(tabletMediaQuery.matches != true){
                            section_container.style.marginLeft = "25px";
                            section_container.style.width = "500px";
                        }
                        //click_toggle = 0;
                    }
                }catch(error){}
            });

            window.onload = (event) => { 
                sidebar_content_scroll.style.height = (window.innerHeight + "px").toLocaleLowerCase().toString();
                sidebar_content.style.height = (window.innerHeight + "px").toLocaleLowerCase().toString();

                if(tabletMediaQuery.matches){ center_section(); close_sidebar(); }
                else{
                    hamburger_checkbox.checked = true;
                    sidebar_open.style.display = "block";
                    menu_icon.style.display = "none";
                    close_icon.style.display = "inline-block";

                    //section_container.style.width = "500px";
                    //section_container.style.marginLeft = ( (25 + 310) + "px").toString();
                }
            };
            window.addEventListener("resize",() =>{
                sidebar_content_scroll.style.height = (window.innerHeight + "px").toLocaleLowerCase().toString();
                sidebar_content.style.height = (window.innerHeight + "px").toLocaleLowerCase().toString();

                if(tabletMediaQuery.matches){ center_section(); if(click_toggle < 1){ close_sidebar(); }}
                else{
                    
                    if(click_toggle == 0){

                        hamburger_checkbox.checked = true;
                        sidebar_open.style.display = "block";
                        menu_icon.style.display = "none";
                        close_icon.style.display = "inline-block";

                        //section_container.style.marginLeft = ( (25 + 310) + "px").toString();
                    }
                }

                console.log(click_toggle)

            });


            checkbox_students.addEventListener("click", () =>{
                try{

                    if (checkbox_students.checked == true) { dropdown_students.style.display = "block"; arrow_students.style.transform = 'rotate(180deg)'; }
                    else{ dropdown_students.style.display = "none"; arrow_students.style.transform = 'rotate(0deg)'; }

                }catch(error){}
            });

            checkbox_subjects.addEventListener("click", () =>{
                try{

                    if (checkbox_subjects.checked == true) { dropdown_subjects.style.display = "block"; arrow_subjects.style.transform = 'rotate(180deg)'; }
                    else{ dropdown_subjects.style.display = "none"; arrow_subjects.style.transform = 'rotate(0deg)';}

                }catch(error){}
            });
            

            school_select.addEventListener("change", function() {
                if(school_select.value != ""){ school_select.style.color = "#000000"; }
                else{ school_select.style.color = "#757575"; }
            });

            authoriz_select.addEventListener("change", function() {
                if(authoriz_select.value != ""){ authoriz_select.style.color = "#000000"; }
                else{ authoriz_select.style.color = "#757575"; }
            });

        </script>


        <script>

            function create_unicode(){
                
                try{
                    
                    var unicode = "";

                    var studentName = document.getElementById('student_name').value;
                    var studentSurname = document.getElementById('student_surname').value;
                    var studentAge = document.getElementById('student_age').value;
                    var studentSchool = document.getElementById("student_school").value;
                    var studentAuthoriz = document.getElementById("student_authorization").value;

                    let currentDate = new Date();

                    let isAllString = /\d/;  
                    let isAllNumber = /^\d+$/;


                    studentName = studentName.replace(/\s/g, '');
                    studentSurname = studentSurname.replace(/\s/g, '');
                    studentAge = studentAge.replace(/\s/g, '');

                    
                    if(studentName.length > 0 && studentSurname.length > 0 && studentAge.length > 0 && studentSchool.length > 0 && studentAuthoriz.length > 0){

                        if(isAllString.test(studentName) != true && isAllString.test(studentSurname) != true && isAllNumber.test(studentAge) != false){
                            unicode = 
                                currentDate.getDate().toString() + (currentDate.getMonth()+1).toString() + 
                                studentName.charAt(0).toUpperCase().toString() + studentName.charAt(parseInt((studentName.length - 1) / 2)).toUpperCase().toString() + studentName.charAt(studentName.length -1 ).toUpperCase().toString() +
                                studentSurname.charAt(0).toUpperCase().toString() + studentSurname.charAt(parseInt((studentSurname.length - 1) / 2)).toUpperCase().toString() + studentSurname.charAt(studentSurname.length -1 ).toUpperCase().toString() +
                                studentAge.toString() +
                                studentSchool.toString() + studentAuthoriz.toString() + 
                                currentDate.getHours().toString() + currentDate.getMinutes().toString() + currentDate.getSeconds().toString() + currentDate.getMilliseconds().toString().substring(0,3);
                            
                            document.getElementById("student_unicode").innerText = unicode;
                            document.getElementById("student_unicode").classList.add("selection_active");
                            document.getElementById("button_copy").style.display = "block";
                        }   
                        else{ console.log("Wrong Characters !");}

                    }
                    else{ console.log("Empty Fields !"); }
                
                }
                catch(error){}

            }
            function copyToClipboard(){ navigator.clipboard.writeText(document.getElementById("student_unicode").textContent); }

        </script>





    </body>

</html>